<project name="formEngine.js" default="crunch" basedir=".">

  <property name="FE" value="formEngine.js" />
  <property name="FET" value="formEngine.tests.js" />

  <target name="jslint">
	<exec executable="java" failonerror="true">
	  <arg line="-jar build/libs/js.jar build/jslint-runner.js" />
	</exec>
  </target>

  <target name="tests" depends="jslint"> 
    <exec executable="java" failonerror="true">
      <arg line="-jar tests/libs/JsTestDriver-1.2.2.jar --config tests/tests.yaml --tests all" />
    </exec>
  </target>

  <target name="combine" depends="tests">

	<concat destfile="${FE}">
	  <fileset file="source/intro.js" />
      <fileset file="source/fe.js" />
      <fileset file="source/fe.engine.js" />
      <fileset file="source/fe.model.js" />
      <fileset file="source/fe.view.js" />
      <fileset file="source/fe.element.js" />
      <fileset file="source/fe.metadataProvider.js" />
	  <fileset file="source/outro.js" />
	</concat>

	<concat destfile="${FET}"> <!-- to estimate test suit size ;) -->
      <fileset file="tests/source/fe.tests.js" />
      <fileset file="tests/source/fe.engine.tests.js" />
      <fileset file="tests/source/fe.model.tests.js" />
      <fileset file="tests/source/fe.view.tests.js" />
      <fileset file="tests/source/fe.element.tests.js" />
      <fileset file="tests/source/fe.metadataProvider.tests.js" />
	</concat>
    
  </target>

  <target name="crunch" depends="combine">
  </target>

</project>

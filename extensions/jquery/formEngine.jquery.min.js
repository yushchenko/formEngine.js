(function(r,l){function g(c,a){var b={start:"<%",end:"%>",interpolate:/<%=(.+?)%>/g},f=RegExp("'(?=[^"+b.end.substr(0,1)+"]*"+b.end.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+")","g");b=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj||{}){p.push('"+c.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(f,"\u2704").split("'").join("\\'").split("\u2704").join("'").replace(b.interpolate,"',$1,'").split(b.start).join("');").split(b.end).join("p.push('")+
"');}return p.join('');");return a?b(a):b}fe.jquery={};fe.jquery.elements={};fe.jquery.dsl={};var q={undefinedViewContainerId:"view.initialize: viewContainerId property must be defined for view element."};fe.jquery.runSimpleApp=function(c,a){var b={};b.provider=fe.metadataProvider({metadata:c});b.engine=fe.engine();b.model=fe.model({metadata:b.provider.getModelMetadata(),engine:b.engine});b.view=fe.view({metadata:b.provider.getViewMetadata(),elementTypes:fe.jquery.elements,defaultElementType:fe.jquery.element,
engine:b.engine});b.engine.addRules(b.provider.getRules());b.engine.addTriggers(b.provider.getTriggers());b.view.initialize();b.model.set(a);return b};fe.jquery.element=function(c){var a=fe.element(c),b=a.setHidden,f=a.setReadonly,h,i,k;a.editorId=a.id.replace(/\./g,"_");a.containerId="c_"+a.editorId;a.errorId="e_"+a.editorId;a.initialize=function(){a.doInitialize&&a.doInitialize();a.eachChild(function(d){d.initialize()})};a.getMarkup=function(){var d=a.template,e="";a.eachChild(function(j){e+=j.getMarkup()});
if(typeof d==="function")return d({editorId:a.editorId,containerId:a.containerId,errorId:a.errorId,content:e,properties:a.properties});return e};a.getEditor=function(){if(h===l)h=$("#"+a.editorId);return h};a.getContainer=function(){if(i===l)i=$("#"+a.containerId);return i};a.getError=function(){if(k===l)k=$("#"+a.errorId);return k};a.setHidden=function(d){var e=a.getContainer();e&&e.toggleClass("fe-hidden",d);b(d)};a.setReadonly=function(d){var e=a.getEditor();if(e)e.get(0).disabled=d;f(d)};a.showErrors=
function(d){var e=a.getError();e&&e.html(d.join("<br />"))};return a};fe.jquery.elements.view=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>"><%=content%></div>');a.doInitialize=function(){var b=a.properties.viewContainerId;if(typeof b!=="string")throw Error(q.undefinedViewContainerId);document.getElementById(b).innerHTML=a.getMarkup()};return a};fe.jquery.dsl.view=fe.dsl.elementConstructor("view",{},{container:function(c){this.element.properties.viewContainerId=c;
return this.chain}});fe.jquery.elements.textBox=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>" class="fe-element"><label for="<%=editorId%>" class="fe-element-label"><%=properties.label%></label><input type="text" id="<%=editorId%>" class="fe-editor-wide"></input><div id="<%=errorId%>" class="fe-element-error"></div></div>');a.initialize=function(){a.getEditor().change(function(){a.notifyValueChange(a.getEditor().val())})};a.setValue=function(b){a.getEditor().val(b)};
return a};fe.jquery.dsl.textBox=fe.dsl.elementConstructor("textBox");fe.jquery.elements.comboBox=function(c){function a(d){function e(n){var m=document.createElement("option");m.value=n.id;m.text=n.name;o.add(m,null)}var j,p,o=document.getElementById(b.editorId);i=d;o.innerHTML="";e({id:-1,name:"Select..."});j=0;for(p=d.length;j<p;j+=1)e(d[j]);b.getEditor().val(k||-1)}var b=fe.jquery.element(c);c=c.engine;var f=b.receiveMessage,h=b.properties.list,i,k;h&&c.addRule({receiverId:b.id,path:h,signal:"value"});
b.template=g('<div id="<%=containerId%>" class="fe-element"><label for="<%=editorId%>" class="fe-element-label"><%=properties.label%></label><select id="<%=editorId%>" class="fe-editor-wide"></select><div id="<%=errorId%>" class="fe-element-error"></div></div>');b.receiveMessage=function(d){d.signal==="value"&&d.rulePath===h?a(d.data):f(d)};b.initialize=function(){b.getEditor().change(function(){var d;a:{d=b.getEditor().val();var e,j;d=parseInt(d,10);if(i){e=0;for(j=i.length;e<j;e+=1)if(i[e].id===
d){d=i[e];break a}}d=l}b.notifyValueChange(d)})};b.setValue=function(d){k=d!==null&&d!==l?d.id:-1;b.getEditor().val(k||-1)};return b};fe.jquery.dsl.comboBox=fe.dsl.elementConstructor("comboBox",{validate:function(){if(typeof this.element.properties.list!=="string")throw Error("comboBox ("+this.element.binding+") must have list property!");}},{list:function(c){this.element.properties.list=c;return this.chain}});fe.jquery.elements.checkBox=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>" class="fe-element"><label for="<%=editorId%>" class="fe-element-label"><%=properties.label%></label><input type="checkbox" id="<%=editorId%>"></input><div id="<%=errorId%>" class="fe-element-error"></div></div>');
a.initialize=function(){a.getEditor().change(function(){a.notifyValueChange(a.getEditor().attr("checked"))})};a.setValue=function(b){a.getEditor().attr("checked",b)};return a};fe.jquery.dsl.checkBox=fe.dsl.elementConstructor("checkBox");fe.jquery.elements.toolBar=function(c){c=fe.jquery.element(c);c.template=g('<div id="<%=containerId%>" class="fe-element fe-toolbar"><%=content%></div>');return c};fe.jquery.dsl.toolBar=fe.dsl.elementConstructor("toolBar");fe.jquery.elements.button=function(c){var a=
fe.jquery.element(c),b=c.engine;a.template=g('<span id="<%=editorId%>"><%=properties.label%></span>');a.initialize=function(){a.getEditor().button({icons:{primary:a.properties.icon}}).click(function(){b.sendMessage({senderId:a.id,signal:"click"})})};a.setHidden=function(f){a.getEditor().toggleClass("fe-hidden",f)};a.setReadonly=function(f){a.getEditor().button(f?"disable":"enable")};return a};fe.jquery.dsl.button=fe.dsl.elementConstructor("button",{},{icon:function(c){this.element.properties.icon=
c;return this.chain}});fe.jquery.elements.label=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>" class="fe-element"><label class="fe-element-label"><%=properties.label%></label><span id="<%=editorId%>" class="fe-editor-wide"></span></div>');a.setValue=function(b){a.getEditor().text(b)};return a};fe.jquery.dsl.label=fe.dsl.elementConstructor("label");fe.jquery.elements.panel=function(c){c=fe.jquery.element(c);c.template=g('<div id="<%=containerId%>" class="fe-element"><%=content%></div>');
return c};fe.jquery.dsl.panel=fe.dsl.elementConstructor("panel");fe.jquery.elements.header=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>" class="fe-element fe-header"><span id="<%=editorId%>"></span></div>');a.setValue=function(b){a.getEditor().text(b)};return a};fe.jquery.dsl.header=fe.dsl.elementConstructor("header");fe.jquery.elements.datePicker=function(c){var a=fe.jquery.element(c);a.template=g('<div id="<%=containerId%>" class="fe-element"><label for="<%=editorId%>" class="fe-element-label"><%=properties.label%></label><input type="text" id="<%=editorId%>" class="fe-editor-narrow"></input><div id="<%=errorId%>" class="fe-element-error"></div></div>');
a.initialize=function(){var b=a.getEditor().datepicker();b.change(function(){a.notifyValueChange(b.datepicker("getDate"))})};a.setValue=function(b){a.getEditor().datepicker("setDate",b)};return a};fe.jquery.dsl.datePicker=fe.dsl.elementConstructor("datePicker");fe.jquery.elements.numberEditor=function(c){var a=fe.jquery.element(c),b;a.template=g('<div id="<%=containerId%>" class="fe-element"><label for="<%=editorId%>" class="fe-element-label"><%=properties.label%></label><input type="text" id="<%=editorId%>" class="fe-editor-narrow"></input><div id="<%=errorId%>" class="fe-element-error"></div></div>');
a.initialize=function(){var f=a.getEditor();f.change(function(){var h=+f.val();if(isNaN(h))a.setValue(b);else{a.notifyValueChange(h);b=h}})};a.setValue=function(f){b=f;a.getEditor().val(f)};return a};fe.jquery.dsl.numberEditor=fe.dsl.elementConstructor("numberEditor")})(function(){return this}());
